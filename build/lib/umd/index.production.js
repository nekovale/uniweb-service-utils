!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).UniwebService={},t.axios)}(this,(function(t,e){"use strict";function n(t,e,n,a,r,u,o){try{var i=t[u](o),s=i.value}catch(t){return void n(t)}i.done?e(s):Promise.resolve(s).then(a,r)}function a(t){return function(){var e=this,a=arguments;return new Promise((function(r,u){var o=t.apply(e,a);function i(t){n(o,r,u,i,s,"next",t)}function s(t){n(o,r,u,i,s,"throw",t)}i(void 0)}))}}function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},r.apply(this,arguments)}var u=function(){function t(){var t,n,r,u=this;this.url="",this.lang="en",this.authKey=null,this.setAuth=function({key:t}){u.authKey=t},this.config=function({url:t,lang:e,key:n}){t&&(u.url=t),e&&(u.lang=e),n&&(u.authKey=n)},this.auth={login:(n=a((function*(t){var e,n=yield u.request({method:"POST",endpoint:"/auth/login",data:t});return 200===n.status&&n.data&&u.setAuth({key:null==(e=n.data)?void 0:e.access_token}),n})),function(t){return n.apply(this,arguments)}),verifyEmail:(t=a((function*(t){var e,n=yield u.request({method:"POST",endpoint:"/auth/verify-email",data:t});return 200===n.status&&n.data&&u.setAuth({key:null==(e=n.data)?void 0:e.access_token}),n})),function(e){return t.apply(this,arguments)}),resetPassword:function(t){return u.request({method:"POST",endpoint:"/auth/reset-password",data:t})},setPassword:function(t){return u.request({method:"POST",endpoint:"/auth/set-password",data:t})}},this.manage={oss:{upload:(r=a((function*(t){var n=yield u.request({method:"GET",endpoint:"/manage/get-upload-url"});if(n&&n.data){var a=n.data.key+"."+t.name.split(".").pop(),r=new FormData;r.append("key",a),r.append("policy",n.data.policy),r.append("OSSAccessKeyId",n.data.accessid),r.append("success_action_status","200"),r.append("Signature",n.data.signature),r.append("file",t);var o=yield e.request({method:"POST",url:n.data.host,headers:{"Content-Type":"multipart/form-data"},data:r});return 200===o.status?{status:200,data:{host:n.data.host,key:a}}:{status:o.status,message:o.statusText}}return{status:500,message:"Internal Server Error"}})),function(t){return r.apply(this,arguments)})},publish:{create:function(t){return u.request({method:"POST",endpoint:"/manage/create-publish",data:t})},list:function(){return u.request({method:"GET",endpoint:"/manage/list-publish"})},get:function(t){return u.request({method:"GET",endpoint:"/query/publish",data:t})},cancel:function(t){return u.request({method:"POST",endpoint:"/manage/cancel-publish",data:t})},validate:function(){return u.request({method:"GET",endpoint:"/manage/validate-publish"})},republish:function(t){return u.request({method:"POST",endpoint:"/manage/republish",data:t})}},user:{create:function(t){return u.request({method:"POST",endpoint:"/manage/create-user",data:t})},update:function(t){return u.request({method:"POST",endpoint:"/manage/update-user",data:t})},remove:function(t){return u.request({method:"POST",endpoint:"/manage/remove-user",data:t})},list:function(){return u.request({method:"GET",endpoint:"/manage/list-user"})},resendEmailInvite:function(t){return u.request({method:"POST",endpoint:"/manage/resend-email-invite",data:t})}},struct:{weight:function(t){return u.request({method:"POST",endpoint:"/manage/weight-struct",data:t})},create:function(t){return u.request({method:"POST",endpoint:"/manage/add-struct",data:t})},update:function(t){return u.request({method:"POST",endpoint:"/manage/update-struct",data:t})},remove:function(t){return u.request({method:"POST",endpoint:"/manage/remove-struct",data:t})}},template:{create:function(t){return u.request({method:"POST",endpoint:"/manage/create-template",data:t})},update:function(t){return u.request({method:"POST",endpoint:"/manage/update-template",data:t})},remove:function(t){return u.request({method:"POST",endpoint:"/manage/remove-template",data:t})},list:function(){return u.request({method:"GET",endpoint:"/manage/list-template"})},listValue:function(t){return u.request({method:"GET",endpoint:"/manage/list-template-value",data:t})},createValue:function(t){return u.request({method:"POST",endpoint:"/mutation/create-template-value",data:t})}},group:{weight:function(t){return u.request({method:"POST",endpoint:"/mutation/weight-group",data:t})},create:function(t){return u.request({method:"POST",endpoint:"/mutation/create-group",data:t})},update:function(t){return u.request({method:"POST",endpoint:"/mutation/update-group",data:t})},remove:function(t){return u.request({method:"POST",endpoint:"/mutation/remove-group",data:t})},get:function(t){return u.request({method:"GET",endpoint:"/manage/list-group",data:t})}}}}return t.prototype.request=function(){var t=a((function*({method:t,endpoint:n,data:a}){return e.request({method:t,url:n,baseURL:this.url,headers:r({"Content-Type":"application/json"},this.lang&&{"Accept-Language":this.lang},this.authKey&&{Authorization:"Bearer "+this.authKey}),params:"GET"===t?a:void 0,data:"GET"===t?void 0:a}).then((function(t){return{status:200,data:t.data}})).catch((function(t){var e,n,a;return{status:null==(e=t.response)?void 0:e.status,errors:null==(n=t.response)?void 0:n.data.errors,message:null==(a=t.response)?void 0:a.data.message}}))}));return function(e){return t.apply(this,arguments)}}(),t}(),o=new u;t.Group={list:1},t.PublishStatus={progress:0,finished:1,canceled:2},t.Resource={text:1,image:2,video:3,rich:4,number:5},t.Role={admin:1,user:2,super:3},t.UniwebInstance=o,t.UniwebService=u,t.UserStatus={active:1,inactive:2}}));
//# sourceMappingURL=index.production.js.map
