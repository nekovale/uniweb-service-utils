{"version":3,"file":"index.production.js","sources":["../../../src/service.ts"],"sourcesContent":["import axios from \"axios\";\nimport {\n  IGroup,\n  IRequestAuthLogin,\n  IRequestCreateGroup,\n  IRequestCreateStruct,\n  IRequestCreateTemplate,\n  IRequestCreateTemplateValue,\n  IRequestCreateUser,\n  IRequestInitStruct,\n  IRequestListTemplateValue,\n  IRequestQueryGroup,\n  IRequestRemoveGroup,\n  IRequestRemoveStruct,\n  IRequestRemoveTemplate,\n  IRequestRemoveUser,\n  IRequestResult,\n  IRequestUpdateGroup,\n  IRequestUpdateStruct,\n  IRequestUpdateTemplate,\n  IRequestUpdateUser,\n  IResultAuthLogin,\n  IResultCreateUser,\n  IResultUpdateUser,\n  ITemplate,\n  ITemplateValue,\n  IUser,\n  TRole,\n  TResource,\n  TGroup,\n  IRequestAuthVerifyEmail,\n  IRequestResendVerifyEmail,\n  TUserStatus,\n} from \"./types\";\n\nexport const Role: Record<string, TRole> = {\n  admin: 1,\n  user: 2,\n  super: 3,\n};\n\nexport const Group: Record<string, TGroup> = {\n  list: 1,\n};\n\nexport const Resource: Record<string, TResource> = {\n  text: 1,\n  image: 2,\n  video: 3,\n  rich: 4,\n};\n\nexport const UserStatus: Record<string, TUserStatus> = {\n  active: 1,\n  inactive: 2,\n};\n\nexport class UniwebService {\n  private url: string = \"\";\n  private authKey: string | null = null;\n\n  constructor() {}\n\n  private async request<T>({\n    method,\n    endpoint,\n    data,\n  }: {\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n    endpoint: string;\n    data?: any;\n  }): Promise<IRequestResult<T>> {\n    return axios\n      .request({\n        method,\n        url: endpoint,\n        baseURL: this.url,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(this.authKey && { Authorization: `Bearer ${this.authKey}` }),\n        },\n        params: method === \"GET\" ? data : undefined,\n        data: method === \"GET\" ? undefined : data,\n      })\n      .then((res) => ({\n        status: 200,\n        data: res.data,\n      }))\n      .catch((err) => ({\n        status: err.response?.status,\n        errors: err.response?.data.errors,\n        message: err.response?.data.message,\n      }));\n  }\n\n  private setAuth = ({ key }: { key: string }) => {\n    this.authKey = key;\n  };\n\n  public config = ({ url }: { url?: string }) => {\n    if (url) this.url = url;\n  };\n\n  public auth = {\n    login: async (input: IRequestAuthLogin) => {\n      const result = await this.request<IResultAuthLogin>({\n        method: \"POST\",\n        endpoint: \"/auth/login\",\n        data: input,\n      });\n      if (result.status === 200 && result.data)\n        this.setAuth({ key: result.data?.access_token });\n      return result;\n    },\n    verifyEmail: (input: IRequestAuthVerifyEmail) => {\n      return this.request<boolean>({\n        method: \"POST\",\n        endpoint: \"/auth/verify-email\",\n        data: input,\n      });\n    },\n  };\n\n  public manage = {\n    user: {\n      create: (input: IRequestCreateUser) =>\n        this.request<IResultCreateUser>({\n          method: \"POST\",\n          endpoint: \"/manage/create-user\",\n          data: input,\n        }),\n      update: (input: IRequestUpdateUser) =>\n        this.request<IResultUpdateUser>({\n          method: \"POST\",\n          endpoint: \"/manage/update-user\",\n          data: input,\n        }),\n      remove: (input: IRequestRemoveUser) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/remove-user\",\n          data: input,\n        }),\n      list: () =>\n        this.request<IUser[]>({\n          method: \"GET\",\n          endpoint: \"/manage/list-user\",\n        }),\n      resendEmailInvite: (input: IRequestResendVerifyEmail) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/resend-email-invite\",\n          data: input,\n        }),\n    },\n    struct: {\n      init: (input: IRequestInitStruct) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/init-struct\",\n          data: input,\n        }),\n      create: (input: IRequestCreateStruct) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/add-struct\",\n          data: input,\n        }),\n      update: (input: IRequestUpdateStruct) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/update-struct\",\n          data: input,\n        }),\n      remove: (input: IRequestRemoveStruct) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/remove-struct\",\n          data: input,\n        }),\n    },\n    template: {\n      create: (input: IRequestCreateTemplate) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/create-template\",\n          data: input,\n        }),\n      update: (input: IRequestUpdateTemplate) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/update-template\",\n          data: input,\n        }),\n      remove: (input: IRequestRemoveTemplate) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/manage/remove-template\",\n          data: input,\n        }),\n      list: () =>\n        this.request<ITemplate[]>({\n          method: \"GET\",\n          endpoint: \"/manage/list-template\",\n        }),\n      listValue: (input: IRequestListTemplateValue) =>\n        this.request<ITemplateValue[]>({\n          method: \"GET\",\n          endpoint: \"/manage/list-template-value\",\n          data: input,\n        }),\n      createValue: (input: IRequestCreateTemplateValue) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/mutation/create-template-value\",\n          data: input,\n        }),\n    },\n    group: {\n      create: (input: IRequestCreateGroup) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/mutation/create-group\",\n          data: input,\n        }),\n      update: (input: IRequestUpdateGroup) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/mutation/update-group\",\n          data: input,\n        }),\n      remove: (input: IRequestRemoveGroup) =>\n        this.request<boolean>({\n          method: \"POST\",\n          endpoint: \"/mutation/remove-group\",\n          data: input,\n        }),\n      get: (input: IRequestQueryGroup) =>\n        this.request<IGroup[]>({\n          method: \"GET\",\n          endpoint: \"/query/group\",\n          data: input,\n        }),\n    },\n  };\n}\n\nconst UniwebInstance = new UniwebService();\n\nexport { UniwebInstance };\n"],"names":["UniwebService","_login","_this","this","url","authKey","setAuth","key","config","auth","login","_asyncToGenerator","input","_result$data","result","request","method","endpoint","data","status","access_token","_x","apply","arguments","verifyEmail","manage","user","create","update","remove","list","resendEmailInvite","struct","init","template","listValue","createValue","group","get","prototype","_request","axios","baseURL","headers","_extends","Authorization","params","undefined","then","res","err","_err$response","_err$response2","_err$response3","response","errors","message","_x2","UniwebInstance","text","image","video","rich","admin","super","active","inactive"],"mappings":"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"}